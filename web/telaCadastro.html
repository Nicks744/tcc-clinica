<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clínica Veterinária - Cadastro</title>
    <link rel="stylesheet" href="telaCadastro.css">
       
</head>
<body>
    <div class="register-container">
        <header>
            <h1>Cadastro da Clínica Veterinária</h1>
        </header>

        <main>
            <h2 id="form-title">Preencha os dados para criar sua conta</h2>

            <!-- Formulário de Cadastro -->
            <nav>
               <form id="cadastro-form" method="POST" action="telaCadastro.jsp">
    <div class="input-group">
        <label for="nomeUsuario">Nome de Usuário:</label>
        <input type="text" id="nomeUsuario" name="username" placeholder="Digite o nome de usuário" required>
    </div>

    <div class="input-group">
        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" placeholder="Digite o seu e-mail" required>
    </div>

    <div class="input-group">
        <label for="rg">RG:</label>
        <input type="text" id="rg_dono" name="rg" maxlength="9" placeholder="Digite seu RG" required>
        <ul id="erro-rg" class="error-message"></ul>
    </div>

    <div class="input-group">
        <label for="senhaUsuario">Senha:</label>
        <input type="password" id="senhaUsuario" name="password" placeholder="Digite a senha" required>
        <ul id="erro-senha" class="error-list"></ul>
    </div>

    <div class="input-group">
        <label for="confirm-password">Confirmar Senha:</label>
        <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirme a senha" required>
        <span id="erro-confirmar-senha" class="error-message"></span>
    </div>

    <button type="submit" class="btn-register">Cadastrar</button>
    <button type="button" class="btn-login" id="btnCancelar" onclick="window.location.href='telaLogin.html'">Cancelar</button>

    <script src="validacaoCadastro.js"></script>
    
    <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("cadastro-form").addEventListener("submit", function (event) {
        const rgInput = document.getElementById("rg_dono");
        const erroRG = document.getElementById("erro-rg");
        erroRG.textContent = "";

        const rg = rgInput.value.trim();

        let formValido = true;

        // Regex para garantir que são apenas 8 ou 9 dígitos
        if (!/^\d{8,9}$/.test(rg)) {
          erroRG.textContent = "O RG deve conter entre 8 e 9 dígitos numéricos.";
          formValido = false;
        } else {
          // Validação do dígito verificador
          let soma = 0;
          let multiplicador = rg.length + 1;

          for (let i = 0; i < rg.length - 1; i++) {
            soma += parseInt(rg.charAt(i)) * multiplicador;
            multiplicador--;
          }

          let resto = soma % 11;
          let digitoVerificador = resto < 2 ? 0 : 11 - resto;

          if (digitoVerificador !== parseInt(rg.charAt(rg.length - 1))) {
            erroRG.textContent = "RG inválido.";
            formValido = false;
          }
        }

        if (!formValido) {
          event.preventDefault(); // impede envio
        }
      });
    });
  </script>
</form>

            </nav>
        </main>
    </div>
</body>
</html>
